<ion-view>
  <!--
  <ion-header-bar align-title="center">
    <div class="buttons">
      <button class="button button-clear button-assertive" ng-click="logout()">Logout</button>
    </div>
    <h1 class="title"><img class="title-image" src="img/ionic.png" width="34" height="34" /></h1>
  </ion-header-bar>
  -->


  <!--
  <ion-nav-bar>
    <ion-nav-buttons side="left">
      <button menu-toggle="left" class="button button-icon icon"><img src="img/ionic.png" width="30" height="30" /></button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
      <button menu-toggle="right" class="button button-icon icon ion-android-more-horizontal"></button>
    </ion-nav-buttons>
  </ion-nav-bar>
  <ion-content>

    <ion-side-menus>
      <ion-side-menu side="left">
      </ion-side-menu>

      <ion-side-menu-content>
        <ion-nav-view>
          <h1>Left</h1>
        </ion-nav-view>
      </ion-side-menu-content>

      <ion-side-menu side="right">
        <ion-side-menu-content>
          <ion-nav-view>
            <h1>Right</h1>
          </ion-nav-view>
        </ion-side-menu-content>
      </ion-side-menu>

    </ion-side-menus>

</ion-content>
  -->
  <ion-side-menus enable-menu-with-back-views="false">
    <ion-side-menu-content>
      <ion-nav-bar class="bar-balanced">
        <ion-nav-back-button>
        </ion-nav-back-button>

        <ion-nav-buttons side="left">
          <button menu-toggle="left" class="button button-icon icon"><img src="img/ionic.png" width="30" height="30" /></button>
        </ion-nav-buttons>

        <ion-nav-title>
          <h1 class="title">
            <span class="inactiveTitle">
              Forum
            </span>
            <label class="toggle toggle-calm toggle-middle" ng-click="goToForum();">
              <input type="checkbox" checked>
              <div class="track">
                <div class="handle"></div>
              </div>
            </label>
            Chat
          </h1>
        </ion-nav-title>

        <ion-nav-buttons side="right">
          <button menu-toggle="right" class="button button-icon icon ion-android-more-horizontal"></button>
        </ion-nav-buttons>
      </ion-nav-bar>

      <ion-nav-view name="menuContent">
        <ion-content>

          <label class="item item-input">
            <input type="text" placeholder="First Name">
          </label>
        </ion-content>
      </ion-nav-view>
    </ion-side-menu-content>

    <ion-side-menu side="left">
      <ion-header-bar class="bar-positive">
        <h1 class="title">{{username}}</h1>
      </ion-header-bar>
      <ion-content>
        <ion-list>
          <!-- Invitations -->
          <ion-item class="item-divider item-icon-right item-energized" ng-show="invitations.length > 0" ng-click="toggleInvitations()">
            Invitations
          </ion-item>

          <div class="invitations" ng-show="showInvitations">
            <div ng-repeat="invitation in invitations">
              <ion-item>
                <span class="icon ion-alert-circled"> </span>
                {{invitation.groupname}}
                <ion-option-button class="button-balanced" ng-click="acceptInvitation(invitation, $index)">Yes</ion-option-button>
                <ion-option-button class="button-assertive" ng-click="refuseInvitation(invitation, $index)">No</ion-option-button>
              </ion-item>
            </div>
          </div>
          <!-- Groups -->
          <ion-item ng-click="updateActiveGroup(-1); unhideChannels(false); unhideUsers(false);" class="item-divider item-divider-principal item-icon-right">
            Groups
            <span class="icon ion-plus-circled" ng-click="showNewGroupPopup()"></span>
          </ion-item>

          <div class="groups" ng-show="showGroups">
            <div ng-repeat="group in groups">
              <ion-item ng-click="updateActiveGroup($index); unhideChannels(true); unhideUsers(true);" ng-show="activeGroup === $index || activeGroup === -1">
                <span class="icon ion-android-contacts"> </span>
                {{group.groupName}}
              </ion-item>
            </div>
          </div>
          <!-- Channels -->
          <ion-item class="item-divider item-divider-principal item-icon-right" ng-show="showChannels">
            Channels
          </ion-item>

          <ion-item class="item-divider item-icon-right" ng-show="showChannels">
            Public
            <span class="icon ion-plus-circled" ng-click="showNewChannelPopup('PUBLIC')"></span>
          </ion-item>

          <div class="channels" ng-show="showChannels">
            <div ng-repeat="group in groups">
              <div ng-show="activeGroup === $parent.$index" ng-repeat="channels in group.publicChannels">
                <ion-item ng-click="clearMessages(); selectChannel($index, 'public');" menu-close>
                  <span class="icon ion-android-chat"> </span>
                  {{channels.channelName}}
                </ion-item>
              </div>
            </div>
          </div>

          <ion-item class="item-divider item-icon-right" ng-show="showChannels">
            Private
            <span class="icon ion-plus-circled" ng-click="showNewChannelPopup('PRIVATE')"></span>
          </ion-item>

          <div class="channels" ng-show="showChannels">
            <div ng-repeat="group in groups">
              <div ng-show="activeGroup === $parent.$index" ng-repeat="channels in group.privateChannels">
                <ion-item ng-click="clearMessages(); selectChannel($index, 'private');" menu-close>
                  <span class="icon ion-android-chat"> </span>
                  {{channels.channelName}}
                </ion-item>
              </div>
            </div>
          </div>

          <!-- Users -->
          <ion-item class="item-divider item-divider-principal item-icon-right" ng-show="showUsers">
            Users
            <!--
            <span class="icon ion-plus-circled" ng-click="showInviteUserPopup()"></span>
            -->
            <span class="icon ion-plus-circled" ng-click="search()"></span>
          </ion-item>

          <div class="users" ng-show="showUsers">
            <div ng-repeat="group in groups">
              <div ng-show="activeGroup === $parent.$index" ng-repeat="user in group.users">
                <ion-item ng-click="searchDirectChannel(user)" ng-show="user.id != userid" menu-close>
                  <span class="icon ion-ios-checkmark" ng-class="users[user.id] ? 'balanced' : ''"> </span>
                  {{user.username}}
                </ion-item>
              </div>
            </div>
          </div>
          <!--
          <ion-item menu-close href="#/app/search">
            Search
          </ion-item>
          <ion-item menu-close href="#/app/browse">
            Browse
          </ion-item>
          <ion-item menu-close href="#/app/playlists">
            Playlists
          </ion-item>
          -->
        </ion-list>
      </ion-content>
    </ion-side-menu>

    <ion-side-menu side="right">
      <div class="bar bar-header">
        <label class="item item-input row">
          <i class="icon ion-search placeholder-icon"></i>
          <input type="search" placeholder="Search">
        </label>
      </div>
      <ion-content id="rightBarContent" class="has-header">
        <!--
        <label class="item item-input">
          <i class="icon ion-search placeholder-icon"></i>
          <input type="search" placeholder="Search">
        </label>
        -->
        <ion-list id="menuList" style="height:100%;">
          <ion-item class="row" style="height: 33.3%; background-color: #343434; border-bottom-color: yellow; border-top-color: yellow;">
            <h2 class="col col-center" style="color: white; font-size: 150%;">
              <span class="icon ion-android-document"></span>
              Files
            </h2>
          </ion-item>
          <ion-item class="row" style="height: 33.3%; background-color: #343434; border-bottom-color: yellow; border-top-color: yellow;">
            <h2 class="col col-center" style="color: white; font-size: 150%;">
              <span class="icon ion-android-contact"></span>
              Users
            </h2>
          </ion-item>
          <ion-item class="row" style="height: 33.3%; background-color: #343434; border-bottom-color: yellow; border-top-color: yellow;">
            <h2 class="col col-center" style="color: white; font-size: 150%;">
              <span class="icon ion-gear-b"></span>
              Settings
            </h2>
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-side-menu>

  </ion-side-menus>

</ion-view>
